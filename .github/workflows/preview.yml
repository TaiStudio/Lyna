name: "Preview Page"

on:
  pull_request:
    types: [opened]

jobs:
  find-and-replace-job:
    name: "Preview Page"
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - uses: actions/checkout@main
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: mad9000/actions-find-and-replace-string@2
        id: findandreplace
        with:
            source: ${{ github.event.pull_request.title }}
            find: '[LYNA] ğŸ“ Edit Page: '
            replace: '' 
      - uses: mad9000/actions-find-and-replace-string@2
        id: commentwith
        with:
            source: ${{ steps.findandreplace.outputs.value }}"
            find: '[LYNA] â• New Page: '
            replace: '' 
      - name: Add comment
        uses: peter-evans/create-or-update-comment@v2
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            Hello and thank you for your contribution!
            A moderator will check the links on your page within the next 48 hours.
            Preview link: [${{ steps.commentwith.outputs.value }}](https://deploy-preview-${{ github.event.pull_request.number }}--lyna.netlify.app/${{ steps.commentwith.outputs.value }})
            Â© [Tai Studio](https://tai-studio.netlify.app/) 2021/2022